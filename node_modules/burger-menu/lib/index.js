"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@douyinfe/semi-animation-react"),l=require("classnames");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=n(e),s=n(l);function r(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]])}return l}function i(){}function o(l){let{children:n}=l;const[s,r]=e.useState(""),[i,o]=e.useState(null),[c,u]=e.useState(null);l.children!==c&&(o(c),u(l.children),null===l.children?r("leave"):r("enter"));const{from:d,enter:m,leave:f}=l;return null===i&&null===c?null:("enter"===s?n=c:"leave"===s&&(n=i),a.default.createElement(t.Transition,{state:s,from:d,enter:m,leave:f,onRest:e=>{"enter"===s?l.didEnter(e):"leave"===s&&(o(null),u(null),l.didLeave(e)),l.onRest(e)}},(t=>{if(e.isValidElement(n)){return e.Children.map(n,(l=>e.cloneElement(l,{style:Object.assign(Object.assign({},l.props.style),t)})))[0]}return null})))}function c(t){return function(l){const{style:n,className:i,rotate:o}=l,c=r(l,["style","className","rotate"]),u=s.default("icon icon-default",i),d={};return Number.isSafeInteger(o)&&(d.transform=`rotate(${o}deg)`),Object.assign(d,n),a.default.createElement("span",Object.assign({role:"img",className:u,style:d},c),e.createElement(t))}}o.defaultProps={didEnter:i,didLeave:i,onRest:i,children:null};var u=c((function(e){return a.default.createElement("svg",Object.assign({viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},e),a.default.createElement("path",{d:"M904.533333 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0L512 644.266667 179.2 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733333l362.666666 362.666667c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866667-12.8l362.666666-362.666667c17.066667-17.066667 17.066667-42.666667 0-59.733333z","p-id":"4865"}))}));const d=t=>{const{title:l,icon:n,children:s}=t,i=r(t,["title","icon","children"]),[c,d]=e.useState({isVisible:e.Children.toArray(s).some((e=>e.props.itemKey===i.selectedKey)),maxHeight:0,rotate:0}),m=e.useCallback((e=>{const t=e&&e.scrollHeight;t&&c.maxHeight!==t&&d(Object.assign(Object.assign({},c),{maxHeight:t}))}),[c]),{maxHeight:f,isVisible:p,rotate:v}=c;return a.default.createElement("div",{className:"sub-menu-wrap"},a.default.createElement("div",{className:"sub-item",onClick:()=>{const e=c.isVisible?0:180;d(Object.assign(Object.assign({},c),{isVisible:!c.isVisible,rotate:e}))}},a.default.createElement("span",{className:"title"},l),a.default.createElement("span",{className:"arrow"},n||a.default.createElement(u,{className:"arrow",rotate:v}))),a.default.createElement(o,{from:{maxHeight:0},enter:{maxHeight:f},leave:{maxHeight:0}},p?a.default.createElement("div",{className:"sub-menu",ref:m},e.Children.map(s,(t=>e.cloneElement(t,Object.assign(Object.assign({},i),{level:i.level+1}))))):null))};d.defaultProps={};const m={overlay:()=>({position:"fixed",zIndex:1e3,width:"100%",height:"100%",top:0,bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.3)"}),menuWrap:(e,t)=>({position:"fixed",right:t?"auto":0,left:t?0:"auto",zIndex:1100,width:e,height:"100%",transition:"all 0.5s ease-in-out"})};function f(t){let{children:l,type:n,duration:s}=t;const r={animationName:n,animationDuration:s};return e.isValidElement(l)&&(l=e.Children.map(l,(l=>{const n={onAnimationEnd:()=>{t.onRest()}};return e.cloneElement(l,Object.assign({className:l.props.className,style:Object.assign(Object.assign({},l.props.style),r)},n))}))),a.default.createElement(a.default.Fragment,null,l)}function p(t){let{children:l}=t;const[n,s]=e.useState(""),[i,o]=e.useState(null),[c,u]=e.useState(null);t.children!==c&&(o(c),u(t.children),null===t.children?s("leave"):s("enter"));const{enter:d,leave:m}=t,p=r(t,["enter","leave"]);let v="";return null===i&&null===c?null:("enter"===n?(v=d,l=c):"leave"===n&&(v=m,l=i),a.default.createElement(f,Object.assign({},p,{type:v,onRest:e=>{"enter"===n?t.didEnter(e):"leave"===n&&(o(null),u(null),t.didLeave(e)),t.onRest(e)}}),l))}p.defaultProps={didEnter:i,didLeave:i,onRest:i,duration:"300ms",children:null};var v=c((function(e){return a.default.createElement("svg",Object.assign({viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},e),a.default.createElement("path",{d:"M571.733333 512l268.8-268.8c17.066667-17.066667 17.066667-42.666667 0-59.733333-17.066667-17.066667-42.666667-17.066667-59.733333 0L512 452.266667 243.2 183.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733333L452.266667 512 183.466667 780.8c-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 19.2 12.8 29.866666 12.8s21.333333-4.266667 29.866667-12.8L512 571.733333l268.8 268.8c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866666-12.8c17.066667-17.066667 17.066667-42.666667 0-59.733333L571.733333 512z","p-id":"4730"}))}));const h=t=>{const l=l=>{const[n,r]=e.useState(!1),i=e.useRef(null),{isOpen:c,left:u,width:d,duration:f,customCrossIcon:h,customIcon:g}=l;e.useEffect((()=>{void 0!==c&&r(c)}),[c]);function y(e){let t=m[e]?function(e){return e("string"!=typeof d?`${d}px`:d,u)}(m[e]):{};return t=Object.assign({},t),t}const b=t.menu,{enterCls:E,leaveCls:O}=b(u),C=()=>{const e=(e,t)=>{null==e||e.classList[n?"add":"remove"](t)};l.bodyClassName&&e(document.querySelector("body"),l.bodyClassName),l.htmlClassName&&e(document.querySelector("html"),l.htmlClassName)},N={didEnter:()=>{C(),l.onOpen()},didLeave:()=>{C(),l.onClose()},duration:f},x=h||a.default.createElement(v,{className:"close-icon"}),w=l.children?e.Children.map(l.children,(t=>e.cloneElement(t,{onClick:l.onClick,selectedKey:l.selectedKey,level:1}))):null;return a.default.createElement(a.default.Fragment,null,!l.noOverlay&&a.default.createElement(o,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},n?a.default.createElement("div",{className:`overlay ${l.overlayClassName}`,style:y("overlay"),onClick:()=>{r(!1)}}):null),a.default.createElement(p,Object.assign({},N,{enter:E,leave:O}),n?a.default.createElement("div",{className:s.default("menu-wrap",l.className),ref:i,style:y("menuWrap")},a.default.createElement("div",{className:"head"},e.isValidElement(g)&&e.cloneElement(g,{className:s.default("logo",g.props.className)}),a.default.createElement("div",{className:"close",onClick:()=>{l.onClose(!1)}},x)),a.default.createElement("div",{className:"menu"},w)):null))};return l.defaultProps={width:300,noOverlay:!1,overlayClassName:"",onOpen:i,onClose:i,left:!1,onClick:i},l},g=e=>{return a.default.createElement("div",{className:s.default("bm-item",{"bm-item-selected":e.itemKey===e.selectedKey}),onClick:t=>{const l={itemKey:e.itemKey,domEvent:t,text:e.text};e.onClick(l)}},(t=e.icon)||e.level>1?a.default.createElement("i",{className:"bm-item-icon"},t):null,a.default.createElement("span",{className:"item-text"},e.text));var t};g.defaultProps={onClick:i,icon:null,level:1};const y={menu:e=>({enterCls:e?"slideInLeft":"slideInRight",leaveCls:e?"slideOutLeft":"slideOutRight"})},b={fallDown:h({menu:()=>({enterCls:"slideInTop",leaveCls:"slideOutTop"})}),slide:h(y)},E=b.slide,O=b.fallDown,C=d,N=g;exports.Item=N,exports.SubMenu=C,exports.fallDown=O,exports.slide=E;
