import e,{useState as t,isValidElement as n,Children as l,cloneElement as s,createElement as a,useCallback as r,useRef as i,useEffect as o}from"react";import{Transition as c}from"@douyinfe/semi-animation-react";import m from"classnames";function u(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(n[l[s]]=e[l[s]])}return n}function d(){}function p(a){let{children:r}=a;const[i,o]=t(""),[m,u]=t(null),[d,p]=t(null);a.children!==d&&(u(d),p(a.children),null===a.children?o("leave"):o("enter"));const{from:v,enter:g,leave:h}=a;return null===m&&null===d?null:("enter"===i?r=d:"leave"===i&&(r=m),e.createElement(c,{state:i,from:v,enter:g,leave:h,onRest:e=>{"enter"===i?a.didEnter(e):"leave"===i&&(u(null),p(null),a.didLeave(e)),a.onRest(e)}},(e=>{if(n(r)){return l.map(r,(t=>s(t,{style:Object.assign(Object.assign({},t.props.style),e)})))[0]}return null})))}function v(t){return function(n){const{style:l,className:s,rotate:r}=n,i=u(n,["style","className","rotate"]),o=m("icon icon-default",s),c={};return Number.isSafeInteger(r)&&(c.transform=`rotate(${r}deg)`),Object.assign(c,l),e.createElement("span",Object.assign({role:"img",className:o,style:c},i),a(t))}}p.defaultProps={didEnter:d,didLeave:d,onRest:d,children:null};var g=v((function(t){return e.createElement("svg",Object.assign({viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},t),e.createElement("path",{d:"M904.533333 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0L512 644.266667 179.2 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733333l362.666666 362.666667c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866667-12.8l362.666666-362.666667c17.066667-17.066667 17.066667-42.666667 0-59.733333z","p-id":"4865"}))}));const h=n=>{const{title:a,icon:i,children:o}=n,c=u(n,["title","icon","children"]),[m,d]=t({isVisible:l.toArray(o).some((e=>e.props.itemKey===c.selectedKey)),maxHeight:0,rotate:0}),v=r((e=>{const t=e&&e.scrollHeight;t&&m.maxHeight!==t&&d(Object.assign(Object.assign({},m),{maxHeight:t}))}),[m]),{maxHeight:h,isVisible:f,rotate:y}=m;return e.createElement("div",{className:"sub-menu-wrap"},e.createElement("div",{className:"sub-item",onClick:()=>{const e=m.isVisible?0:180;d(Object.assign(Object.assign({},m),{isVisible:!m.isVisible,rotate:e}))}},e.createElement("span",{className:"title"},a),e.createElement("span",{className:"arrow"},i||e.createElement(g,{className:"arrow",rotate:y}))),e.createElement(p,{from:{maxHeight:0},enter:{maxHeight:h},leave:{maxHeight:0}},f?e.createElement("div",{className:"sub-menu",ref:v},l.map(o,(e=>s(e,Object.assign(Object.assign({},c),{level:c.level+1}))))):null))};h.defaultProps={};const f={overlay:()=>({position:"fixed",zIndex:1e3,width:"100%",height:"100%",top:0,bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.3)"}),menuWrap:(e,t)=>({position:"fixed",right:t?"auto":0,left:t?0:"auto",zIndex:1100,width:e,height:"100%",transition:"all 0.5s ease-in-out"})};function y(t){let{children:a,type:r,duration:i}=t;const o={animationName:r,animationDuration:i};return n(a)&&(a=l.map(a,(e=>{const n={onAnimationEnd:()=>{t.onRest()}};return s(e,Object.assign({className:e.props.className,style:Object.assign(Object.assign({},e.props.style),o)},n))}))),e.createElement(e.Fragment,null,a)}function b(n){let{children:l}=n;const[s,a]=t(""),[r,i]=t(null),[o,c]=t(null);n.children!==o&&(i(o),c(n.children),null===n.children?a("leave"):a("enter"));const{enter:m,leave:d}=n,p=u(n,["enter","leave"]);let v="";return null===r&&null===o?null:("enter"===s?(v=m,l=o):"leave"===s&&(v=d,l=r),e.createElement(y,Object.assign({},p,{type:v,onRest:e=>{"enter"===s?n.didEnter(e):"leave"===s&&(i(null),c(null),n.didLeave(e)),n.onRest(e)}}),l))}b.defaultProps={didEnter:d,didLeave:d,onRest:d,duration:"300ms",children:null};var E=v((function(t){return e.createElement("svg",Object.assign({viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em"},t),e.createElement("path",{d:"M571.733333 512l268.8-268.8c17.066667-17.066667 17.066667-42.666667 0-59.733333-17.066667-17.066667-42.666667-17.066667-59.733333 0L512 452.266667 243.2 183.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733333L452.266667 512 183.466667 780.8c-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 19.2 12.8 29.866666 12.8s21.333333-4.266667 29.866667-12.8L512 571.733333l268.8 268.8c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866666-12.8c17.066667-17.066667 17.066667-42.666667 0-59.733333L571.733333 512z","p-id":"4730"}))}));const O=a=>{const r=r=>{const[c,u]=t(!1),d=i(null),{isOpen:v,left:g,width:h,duration:y,customCrossIcon:O,customIcon:N}=r;o((()=>{void 0!==v&&u(v)}),[v]);function w(e){let t=f[e]?function(e){return e("string"!=typeof h?`${h}px`:h,g)}(f[e]):{};return t=Object.assign({},t),t}const C=a.menu,{enterCls:x,leaveCls:j}=C(g),L=()=>{const e=(e,t)=>{null==e||e.classList[c?"add":"remove"](t)};r.bodyClassName&&e(document.querySelector("body"),r.bodyClassName),r.htmlClassName&&e(document.querySelector("html"),r.htmlClassName)},k={didEnter:()=>{L(),r.onOpen()},didLeave:()=>{L(),r.onClose()},duration:y},I=O||e.createElement(E,{className:"close-icon"}),R=r.children?l.map(r.children,(e=>s(e,{onClick:r.onClick,selectedKey:r.selectedKey,level:1}))):null;return e.createElement(e.Fragment,null,!r.noOverlay&&e.createElement(p,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},c?e.createElement("div",{className:`overlay ${r.overlayClassName}`,style:w("overlay"),onClick:()=>{u(!1)}}):null),e.createElement(b,Object.assign({},k,{enter:x,leave:j}),c?e.createElement("div",{className:m("menu-wrap",r.className),ref:d,style:w("menuWrap")},e.createElement("div",{className:"head"},n(N)&&s(N,{className:m("logo",N.props.className)}),e.createElement("div",{className:"close",onClick:()=>{r.onClose(!1)}},I)),e.createElement("div",{className:"menu"},R)):null))};return r.defaultProps={width:300,noOverlay:!1,overlayClassName:"",onOpen:d,onClose:d,left:!1,onClick:d},r},N=t=>{return e.createElement("div",{className:m("bm-item",{"bm-item-selected":t.itemKey===t.selectedKey}),onClick:e=>{const n={itemKey:t.itemKey,domEvent:e,text:t.text};t.onClick(n)}},(n=t.icon)||t.level>1?e.createElement("i",{className:"bm-item-icon"},n):null,e.createElement("span",{className:"item-text"},t.text));var n};N.defaultProps={onClick:d,icon:null,level:1};const w={menu:e=>({enterCls:e?"slideInLeft":"slideInRight",leaveCls:e?"slideOutLeft":"slideOutRight"})},C={fallDown:O({menu:()=>({enterCls:"slideInTop",leaveCls:"slideOutTop"})}),slide:O(w)},x=C.slide,j=C.fallDown,L=h,k=N;export{k as Item,L as SubMenu,j as fallDown,x as slide};
//# sourceMappingURL=index.js.map
